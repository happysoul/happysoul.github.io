<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<title>新建网页 1</title>
</head>

<body text="#FFFFFF" bgcolor="#000000">

<p><b><font size="4">//</font><span lang="zh-cn"><font size="4">系统菜单函数A</font></span></b></p>
<p><span lang="zh-cn"><font size="4"><b>&nbsp;</b> </font><font size="2">1.菜单A</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp; 如图示的菜单:</font></span></p>
<p><img border="0" src="../pic/menu1.jpg" width="433" height="190"></p>
<p><span lang="zh-cn"><b><font size="4">&nbsp;</font></b><font size="2">中断调用: 
INT $C205</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; 
入口参数:菜单参数表的低8位地址送寄存器X,</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
高8位地址送寄存器Y</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; 参数表定义:</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; 偏移&nbsp; 00: 09</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
01: 菜单项个数</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
02:第1个菜单项对应程序入口地址低8位</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
03:第1个菜单项对应程序入口地址高8位</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
04:第1个菜单项对应帮助内容开始地址低8位</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
05:第1个菜单项对应帮助内容开始地址高8位</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
.</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
.</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
.</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
XX:&nbsp;&nbsp;&nbsp; 第N个菜单项对应程序入口地址低8位</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
XX + 1:第N个菜单项对应程序入口地址低8位</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
XX + 2:第N个菜单项对应帮助内开始地址低8位</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
XX + 3:第N个菜单项对应帮助内容开始地址高8位</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
然后下面紧接着就是:</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
第1个菜单项的文字说明,例如上面的&quot;1.汉英字典&quot;,以 FF 结尾</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
第2个菜单项的文字说明,例如上面的&quot;2.英英字典&quot;,以 FF 结尾</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
.</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
.</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
.</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
第N个菜单项的文字说明,以 FF 结尾</font></span></p>
<p>　</p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp; 例: 设计一个如图所示的菜单</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
功能:当选中第1个菜单项,弹出信息框,显示 &quot;选中第1菜单项&quot;</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
当选中第2个菜单项,弹出信息框,显示 &quot;选中第2菜单项&quot;</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
当选中第3个菜单项,弹出信息框,显示 &quot;选中第3菜单项&quot;</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 设计步骤:</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp;&nbsp; 进入NCTOOLS,同时按住 Z,H 
键,将地址2000-2FFF全部清为 FF</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp; 设计思路:</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp; 
①先做弹出式信息框,这里由于弹出的信息仅相差一个字节,所以我们可以做一个子程序,寄存器A放31,32,或33</font></span></p>
<p><span lang="zh-cn"><font size="2">然后调用这个子程序,该子程序把寄存器A的值先送哪个地址,再中断调用</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp; 
②然后做帮助,这里帮助内容简单些,是&quot;菜单帮助内容&quot;,后面加 00 00,作为结束标志</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp; ③然后做菜单参数表</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp; ④最后实现菜单</font></span></p>
<p><font size="2">&nbsp;&nbsp;&nbsp; </font></p>
<p><font size="2">&nbsp;&nbsp;&nbsp; <span lang="zh-cn">V 2000</span></font></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp; 输入法&nbsp; 输入&nbsp; 
选中第N菜单项，后面紧接着用 E C 命令输入 0000，作为结束标志</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp;&nbsp; 如图：</font></span></p>
<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" width="80%">
  <tr>
    <td width="40%">
    <img border="0" src="../pic/menu2.jpg" width="383" height="164"></td>
    <td width="60%">
    <img border="0" src="../pic/menu3.jpg" width="378" height="161"></td>
  </tr>
</table>
<p><span lang="zh-cn"><font size="2">&nbsp; 做弹出信息框参数表，从地址2010开始</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; E C 2010</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; 输入 </font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; 80 00 20 09 11 0D 02 19 20 02&nbsp;&nbsp;&nbsp;
</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; 如图：</font></span></p>
<p><img border="0" src="../pic/menu4.jpg" width="382" height="165"></p>
<p><span lang="zh-cn">&nbsp;<font size="2"> 实现弹出信息框子程序，要显示的数字放寄存器A就可以，例如 （A） = 
31，那么就显示 选中第1菜单项</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; A 2020</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; 2020： STA $2006</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; 2023:&nbsp; LDX #$10</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; 2025:&nbsp; LDY #$20</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; 2027:&nbsp; LDA #$00</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; 2029:&nbsp; INT $C312</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; 202C:&nbsp; INT $C008</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; 202F:&nbsp; RTS</font></span></p>
<p>　</p>
<p><span lang="zh-cn"><font size="2">&nbsp; A 2030&nbsp;&nbsp;&nbsp; 显示信息框&nbsp;&nbsp; 
选中第1菜单项</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; 2030: LDA #$31</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; 2032: JSR $2020</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; 2035: RTS</font></span></p>
<p>　</p>
<p><span lang="zh-cn"><font size="2">&nbsp;A 2038&nbsp;&nbsp;&nbsp; 显示信息框&nbsp;&nbsp; 
选中第2菜单项</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; 2038: LDA #$32</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; 203A: JSR $2020</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp; 203D: RTS</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;A 2040&nbsp;&nbsp;&nbsp; 显示信息框&nbsp;&nbsp; 
选中第3菜单项</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp; 2040: LDA #$33</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp; 2042: JSR $2020</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;&nbsp; 2045: RTS</font></span></p>
<p>　</p>
<p><span lang="zh-cn"><font size="2">做菜单帮助内容</font></span></p>
<p><span lang="zh-cn"><font size="2">从地址2048开始:</font></span></p>
<p><span lang="zh-cn"><font size="2">输入法&nbsp; 输入&nbsp; &quot;菜单帮助内容&quot;,注意后面输入结束标志 0000</font></span></p>
<p>　</p>
<p><span lang="zh-cn"><font size="2">现在我们确定一下</font></span></p>
<p><span lang="zh-cn"><font size="2">第一菜单项入口地址&nbsp; 2030</font></span></p>
<p><span lang="zh-cn"><font size="2">第二菜单项入口地址&nbsp; 2038</font></span></p>
<p><span lang="zh-cn"><font size="2">第三菜单项入口地址&nbsp; 2040</font></span></p>
<p><span lang="zh-cn"><font size="2">帮助入口地址&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
2048</font></span></p>
<p>　</p>
<p><span lang="zh-cn"><font size="2">做菜单参数表</font></span></p>
<p><span lang="zh-cn"><font size="2">从地址 2060开始</font></span></p>
<p><span lang="zh-cn"><font size="2">E C 2060</font></span></p>
<p><span lang="zh-cn"><font size="2">输入 09 03 30 20 48 20 38 20 48 20 40 20 48 
20</font></span></p>
<p><span lang="zh-cn"><font size="2">按 输入法 输入 </font></span></p>
<p><span lang="zh-cn"><font size="2">&quot;1.菜单项1&quot;&nbsp; 后面紧接 FF</font></span></p>
<p><span lang="zh-cn"><font size="2">&quot;2.菜单项2&quot;&nbsp; 后面紧接 FF</font></span></p>
<p><span lang="zh-cn"><font size="2">&quot;3.菜单项3&quot;&nbsp; 后面紧接 FF</font></span></p>
<p>　</p>
<p><span lang="zh-cn"><font size="2">实现整个程序主程序</font></span></p>
<p><span lang="zh-cn"><font size="2">从地址2088开始</font></span></p>
<p><span lang="zh-cn"><font size="2">A 2088</font></span></p>
<p><span lang="zh-cn"><font size="2">2088: LDX #$60</font></span></p>
<p><span lang="zh-cn"><font size="2">208A: LDY #$20</font></span></p>
<p><span lang="zh-cn"><font size="2">208C: INT $C505</font></span></p>
<p><span lang="zh-cn"><font size="2">208F: RTS</font></span></p>
<p><span lang="zh-cn"><font size="2">&nbsp;G 2088&nbsp; </font></span></p>

</body>

</html>